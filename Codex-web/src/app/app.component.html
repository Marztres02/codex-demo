<main class="main">
  <section class="todo-wrapper">
    <header>
      <h1>Lista de tareas</h1>
      <p>Organiza tus pendientes y guárdalos localmente en tu navegador.</p>
    </header>

    <form class="todo-form" (ngSubmit)="addTodo()">
      <input
        class="todo-input"
        type="text"
        name="todo"
        placeholder="Escribe una nueva tarea"
        autocomplete="off"
        [(ngModel)]="newTodo"
      />
      <button class="todo-add" type="submit" [disabled]="!newTodo.trim()">
        Agregar
      </button>
    </form>

    <section class="todo-list" *ngIf="todos.length; else emptyState">
      <ul>
        <li
          class="todo-item"
          *ngFor="let todo of todos; trackBy: trackById"
          [class.completed]="todo.completed"
        >
          <label>
            <input
              type="checkbox"
              [checked]="todo.completed"
              (change)="toggleTodo(todo.id)"
            />
            <span>{{ todo.text }}</span>
          </label>
          <button
            type="button"
            class="pill remove"
            (click)="removeTodo(todo.id)"
            [attr.aria-label]="'Eliminar ' + todo.text"
          >
            Eliminar
          </button>
        </li>
      </ul>
      <footer class="todo-actions">
        <span>
          {{ remainingTodos }} tarea{{ remainingTodos === 1 ? '' : 's' }}
          pendiente{{ remainingTodos === 1 ? '' : 's' }}
        </span>
        <button
          type="button"
          class="pill secondary"
          *ngIf="hasCompletedTodos"
          (click)="clearCompleted()"
        >
          Eliminar completadas
        </button>
      </footer>
    </section>

    <ng-template #emptyState>
      <div class="empty-state">
        <p>No tienes tareas registradas todavía.</p>
        <p>Agrega la primera para comenzar.</p>
      </div>
    </ng-template>
  </section>
</main>
